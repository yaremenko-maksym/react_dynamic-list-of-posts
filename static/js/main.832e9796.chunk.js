(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),r=n(3),s=n(4),o=n(2),u=n.n(o),i=n(1),l=n.n(i),j=(n(16),n(17),n(18),n(19),n(0)),b=function(){return Object(j.jsx)("div",{className:"Loader",children:Object(j.jsx)("div",{className:"Loader__content"})})},p="https://mate.academy/students-api",d=function(){var e=Object(r.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/posts"));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("".concat(t.status,": ").concat(t.text));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/posts?userId=").concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,": ").concat(n.text()));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/posts/").concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,": ").concat(n.text));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=l.a.memo((function(e){var t=e.user,n=e.selectedPostId,c=e.selectValue,a=e.handleOpenPostDetails,o=e.getPostFromServerByID,l=Object(i.useState)([]),p=Object(s.a)(l,2),f=p[0],h=p[1],O=Object(i.useState)(!1),x=Object(s.a)(O,2),v=x[0],w=x[1],k=Object(i.useCallback)(Object(r.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:t=e.sent,w(!1),h(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),_=Object(i.useCallback)(Object(r.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t){e.next=7;break}return e.next=4,m(t.id);case 4:n=e.sent,h(n),w(!1);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h([]),w(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t]);return Object(i.useEffect)((function(){w(!0),"All users"!==c?(_(),w(!1)):k()}),[t]),Object(i.useEffect)((function(){o()}),[n]),Object(j.jsxs)("div",{className:"PostsList",children:[Object(j.jsx)("h2",{children:"Posts:"}),Object(j.jsxs)("ul",{className:"PostsList__list","data-cy":"postDetails",children:[f.map((function(e){return Object(j.jsxs)("li",{className:"PostsList__item",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),Object(j.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return a(e.id)},children:n===e.id?"Close":"Open"})]},e.id)})),v&&Object(j.jsx)(b,{})]})]})})),O=n(10),x=function(){var e=Object(r.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/comments?postId=").concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,": ").concat(n.text));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/comments/").concat(t),{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(r.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/comments"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(9),_=n.n(k),N=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())},C=(n(21),l.a.memo((function(e){var t=e.getComments,n=e.postId,c=Object(i.useState)(""),a=Object(s.a)(c,2),o=a[0],l=a[1],p=Object(i.useState)(""),d=Object(s.a)(p,2),m=d[0],f=d[1],h=Object(i.useState)(""),O=Object(s.a)(h,2),x=O[0],v=O[1],k=Object(i.useState)(!0),C=Object(s.a)(k,2),y=C[0],P=C[1],S=Object(i.useState)(!1),D=Object(s.a)(S,2),g=D[0],A=D[1],E=Object(i.useState)(!1),L=Object(s.a)(E,2),I=L[0],F=L[1],B=Object(i.useCallback)(function(){var e=Object(r.a)(u.a.mark((function e(c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),F(!0),A(!0),o&&m&&x){e.next=6;break}return F(!1),e.abrupt("return");case 6:if(N(m)){e.next=10;break}return P(!1),F(!1),e.abrupt("return");case 10:return a={postId:n,name:o,email:m,body:x},e.next=13,w(a);case 13:return e.next=15,t();case 15:A(!1),F(!1),l(""),f(""),v("");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,m,x,n]);return Object(j.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){return B(e)},children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:o,onChange:function(e){var t=e.target;l(t.value)}})}),Object(j.jsxs)("div",{className:"form-field",children:[!y&&Object(j.jsx)("p",{className:"NewCommentForm__emailError",children:"Email is invalid"}),Object(j.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:_()("NewCommentForm__input",{"NewCommentForm__input--invalid":!y}),value:m,onChange:function(e){var t=e.target;g&&m!==t.value&&P(!0),f(t.value)},onBlur:function(e){var t=e.target;g&&P(N(t.value))}})]}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:x,onChange:function(e){var t=e.target;v(t.value)}})}),Object(j.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:I,children:I?Object(j.jsx)(b,{}):"Add a comment"})]})}))),y=(n(22),l.a.memo((function(e){var t=e.selectedPost,n=e.selectedPostComments,c=e.getComments,a=Object(i.useState)(!0),o=Object(s.a)(a,2),l=o[0],p=o[1],d=Object(i.useState)(!1),m=Object(s.a)(d,2),f=m[0],h=m[1],x=Object(i.useState)([]),w=Object(s.a)(x,2),k=w[0],_=w[1],N=Object(i.useCallback)(function(){var e=Object(r.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,v(t);case 3:return e.next=5,c();case 5:h(!1),_((function(e){return e.filter((function(e){return e!==t}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(j.jsxs)("div",{className:"PostDetails","data-cy":"postDetails",children:[Object(j.jsx)("h2",{children:"Post details:"}),Object(j.jsx)("section",{className:"PostDetails__post",children:Object(j.jsx)("p",{children:t.body})}),Object(j.jsxs)("section",{className:"PostDetails__comments",children:[Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){return p(!l)},children:"".concat(l?"Hide":"Show"," ").concat(n.length," comments")}),Object(j.jsx)("ul",{className:"PostDetails__list",children:l&&n.map((function(e){return Object(j.jsxs)("li",{className:"PostDetails__list-item",children:[Object(j.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){N(e.id),_((function(t){return[].concat(Object(O.a)(t),[e.id])}))},disabled:f&&k.includes(e.id),children:f&&k.includes(e.id)?Object(j.jsx)(b,{}):"X"}),Object(j.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(j.jsx)(C,{postId:t.id,getComments:c})})})]})}))),P=function(){var e=Object(r.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/users?name=").concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,": ").concat(n.text()));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(0),o=Object(s.a)(a,2),l=o[0],p=o[1],d=Object(i.useState)("All users"),m=Object(s.a)(d,2),O=m[0],v=m[1],w=Object(i.useState)(null),k=Object(s.a)(w,2),_=k[0],N=k[1],C=Object(i.useState)([]),S=Object(s.a)(C,2),D=S[0],g=S[1],A=Object(i.useState)(!1),E=Object(s.a)(A,2),L=E[0],I=E[1],F=Object(i.useCallback)(Object(r.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=x(l),e.next=4,f(l);case 4:return n=e.sent,e.next=7,t;case 7:c=e.sent,I(!1),N(n),g(c),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),I(!1),N(null),g([]);case 18:case"end":return e.stop()}}),e,null,[[0,13]])}))),[l]),B=Object(i.useCallback)(Object(r.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(l);case 3:t=e.sent,g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g([]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[l]),G=Object(i.useCallback)(function(){var e=Object(r.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t);case 3:n=e.sent,c(n[0]),p(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),R=Object(i.useCallback)((function(e){if(l===e)return I(!1),p(0),N(null),void g([]);N(null),g([]),I(!0),p(e)}),[l]),T=Object(i.useCallback)((function(e){v(e),c(null),"All users"!==e&&G(e)}),[]);return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App__header",children:Object(j.jsxs)("label",{children:["Select a user: \xa0",Object(j.jsxs)("select",{className:"App__user-selector",value:O,onChange:function(e){var t=e.target;return T(t.value)},children:[Object(j.jsx)("option",{value:"All users",children:"All users"}),Object(j.jsx)("option",{value:"Leanne Graham",children:"Leanne Graham"}),Object(j.jsx)("option",{value:"Ervin Howell",children:"Ervin Howell"}),Object(j.jsx)("option",{value:"Clementine Bauch",children:"Clementine Bauch"}),Object(j.jsx)("option",{value:"Patricia Lebsack",children:"Patricia Lebsack"}),Object(j.jsx)("option",{value:"Chelsey Dietrich",children:"Chelsey Dietrich"}),Object(j.jsx)("option",{value:"Mrs. Dennis Schulist",children:"Mrs. Dennis Schulist"}),Object(j.jsx)("option",{value:"Kurtis Weissnat",children:"Kurtis Weissnat"}),Object(j.jsx)("option",{value:"Nicholas Runolfsdottir V",children:"Nicholas Runolfsdottir V"}),Object(j.jsx)("option",{value:"Glenna Reichert",children:"Glenna Reichert"})]})]})}),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsx)("div",{className:"App__sidebar",children:Object(j.jsx)(h,{user:n,selectedPostId:l,selectValue:O,handleOpenPostDetails:R,getPostFromServerByID:F})}),_&&Object(j.jsx)("div",{className:"App__content",children:Object(j.jsx)(y,{selectedPost:_,selectedPostComments:D,getComments:B})}),L&&Object(j.jsx)("div",{className:"App__content",children:Object(j.jsx)(b,{})})]})]})};a.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.832e9796.chunk.js.map