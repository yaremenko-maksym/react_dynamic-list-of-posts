(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),s=n(4),r=n(3),i=n(2),o=n.n(i),u=n(1),l=n.n(u),j=(n(16),n(17),n(18),n(19),n(0)),b=function(){return Object(j.jsx)("div",{className:"Loader",children:Object(j.jsx)("div",{className:"Loader__content"})})},d="https://mate.academy/students-api",m=function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,": ").concat(n.text));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=l.a.memo((function(e){var t=e.user,n=e.selectedPostId,c=e.selectValue,a=e.handleOpenPostDetails,i=e.getPostFromServerByID,l=Object(u.useState)([]),d=Object(r.a)(l,2),p=d[0],O=d[1],h=Object(u.useState)(!1),f=Object(r.a)(h,2),x=f[0],v=f[1],_=Object(u.useCallback)(Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/posts");case 3:t=e.sent,v(!1),O(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),N=Object(u.useCallback)(Object(s.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t){e.next=7;break}return e.next=4,c=t.id,m("/posts?userId=".concat(c));case 4:n=e.sent,O(n),v(!1);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),O([]),v(!1);case 13:case"end":return e.stop()}var c}),e,null,[[0,9]])}))),[t]);return Object(u.useEffect)((function(){v(!0),"All users"!==c?(N(),v(!1)):_()}),[t]),Object(u.useEffect)((function(){i()}),[n]),Object(j.jsxs)("div",{className:"PostsList",children:[Object(j.jsx)("h2",{children:"Posts:"}),Object(j.jsxs)("ul",{className:"PostsList__list","data-cy":"postDetails",children:[p.map((function(e){return Object(j.jsxs)("li",{className:"PostsList__item",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),Object(j.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return a(e.id)},children:n===e.id?"Close":"Open"})]},e.id)})),x&&Object(j.jsx)(b,{})]})]})})),O=n(10),h=function(e){return m("/comments?postId=".concat(e))},f=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/comments/").concat(t),{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/comments"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(9),_=n.n(v),N=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())},k=(n(21),l.a.memo((function(e){var t=e.getComments,n=e.postId,c=Object(u.useState)(""),a=Object(r.a)(c,2),i=a[0],l=a[1],d=Object(u.useState)(""),m=Object(r.a)(d,2),p=m[0],O=m[1],h=Object(u.useState)(""),f=Object(r.a)(h,2),v=f[0],k=f[1],w=Object(u.useState)(!0),C=Object(r.a)(w,2),y=C[0],P=C[1],S=Object(u.useState)(!1),D=Object(r.a)(S,2),g=D[0],A=D[1],L=Object(u.useState)(!1),E=Object(r.a)(L,2),I=E[0],F=E[1],B=Object(u.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(c){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),F(!0),A(!0),i&&p&&v){e.next=6;break}return F(!1),e.abrupt("return");case 6:if(N(p)){e.next=10;break}return P(!1),F(!1),e.abrupt("return");case 10:return a={postId:n,name:i,email:p,body:v},e.next=13,x(a);case 13:return e.next=15,t();case 15:A(!1),F(!1),l(""),O(""),k("");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,p,v,n]);return Object(j.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){return B(e)},children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:i,onChange:function(e){var t=e.target;l(t.value)}})}),Object(j.jsxs)("div",{className:"form-field",children:[!y&&Object(j.jsx)("p",{className:"NewCommentForm__emailError",children:"Email is invalid"}),Object(j.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:_()("NewCommentForm__input",{"NewCommentForm__input--invalid":!y}),value:p,onChange:function(e){var t=e.target;g&&p!==t.value&&P(!0),O(t.value)},onBlur:function(e){var t=e.target;g&&P(N(t.value))}})]}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:v,onChange:function(e){var t=e.target;k(t.value)}})}),Object(j.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:I,children:I?Object(j.jsx)(b,{}):"Add a comment"})]})}))),w=(n(22),l.a.memo((function(e){var t=e.selectedPost,n=e.selectedPostComments,c=e.getComments,a=Object(u.useState)(!0),i=Object(r.a)(a,2),l=i[0],d=i[1],m=Object(u.useState)(!1),p=Object(r.a)(m,2),h=p[0],x=p[1],v=Object(u.useState)([]),_=Object(r.a)(v,2),N=_[0],w=_[1],C=Object(u.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,f(t);case 3:return e.next=5,c();case 5:x(!1),w((function(e){return e.filter((function(e){return e!==t}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(j.jsxs)("div",{className:"PostDetails","data-cy":"postDetails",children:[Object(j.jsx)("h2",{children:"Post details:"}),Object(j.jsx)("section",{className:"PostDetails__post",children:Object(j.jsx)("p",{children:t.body})}),Object(j.jsxs)("section",{className:"PostDetails__comments",children:[Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){return d(!l)},children:"".concat(l?"Hide":"Show"," ").concat(n.length," comments")}),Object(j.jsx)("ul",{className:"PostDetails__list",children:l&&n.map((function(e){return Object(j.jsxs)("li",{className:"PostDetails__list-item",children:[Object(j.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){C(e.id),w((function(t){return[].concat(Object(O.a)(t),[e.id])}))},disabled:h&&N.includes(e.id),children:h&&N.includes(e.id)?Object(j.jsx)(b,{}):"X"}),Object(j.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(j.jsx)(k,{postId:t.id,getComments:c})})})]})}))),C=function(e){return m("/users?name=".concat(e))},y=function(){var e=Object(u.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)(null),i=Object(r.a)(a,2),l=i[0],d=i[1],O=Object(u.useState)("All users"),f=Object(r.a)(O,2),x=f[0],v=f[1],_=Object(u.useState)(null),N=Object(r.a)(_,2),k=N[0],y=N[1],P=Object(u.useState)([]),S=Object(r.a)(P,2),D=S[0],g=S[1],A=Object(u.useState)(!1),L=Object(r.a)(A,2),E=L[0],I=L[1],F=Object(u.useCallback)(Object(s.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=12;break}return t=h(l),e.next=5,m("/posts/".concat(l));case 5:return n=e.sent,e.next=8,t;case 8:c=e.sent,I(!1),y(n),g(c);case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),I(!1),y(null),g([]);case 19:case"end":return e.stop()}}),e,null,[[0,14]])}))),[l]),B=Object(u.useCallback)(Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=6;break}return e.next=4,h(l);case 4:t=e.sent,g(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),g([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[l]),G=Object(u.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:n=e.sent,c(n[0]),d(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),R=Object(u.useCallback)((function(e){if(l===e)return I(!1),d(null),y(null),void g([]);y(null),g([]),I(!0),d(e)}),[l]),T=Object(u.useCallback)((function(e){v(e),c(null),"All users"!==e&&G(e)}),[]);return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App__header",children:Object(j.jsxs)("label",{children:["Select a user: \xa0",Object(j.jsxs)("select",{className:"App__user-selector",value:x,onChange:function(e){var t=e.target;return T(t.value)},children:[Object(j.jsx)("option",{value:"All users",children:"All users"}),Object(j.jsx)("option",{value:"Leanne Graham",children:"Leanne Graham"}),Object(j.jsx)("option",{value:"Ervin Howell",children:"Ervin Howell"}),Object(j.jsx)("option",{value:"Clementine Bauch",children:"Clementine Bauch"}),Object(j.jsx)("option",{value:"Patricia Lebsack",children:"Patricia Lebsack"}),Object(j.jsx)("option",{value:"Chelsey Dietrich",children:"Chelsey Dietrich"}),Object(j.jsx)("option",{value:"Mrs. Dennis Schulist",children:"Mrs. Dennis Schulist"}),Object(j.jsx)("option",{value:"Kurtis Weissnat",children:"Kurtis Weissnat"}),Object(j.jsx)("option",{value:"Nicholas Runolfsdottir V",children:"Nicholas Runolfsdottir V"}),Object(j.jsx)("option",{value:"Glenna Reichert",children:"Glenna Reichert"})]})]})}),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsx)("div",{className:"App__sidebar",children:Object(j.jsx)(p,{user:n,selectedPostId:l,selectValue:x,handleOpenPostDetails:R,getPostFromServerByID:F})}),k&&Object(j.jsx)("div",{className:"App__content",children:Object(j.jsx)(w,{selectedPost:k,selectedPostComments:D,getComments:B})}),E&&Object(j.jsx)("div",{className:"App__content",children:Object(j.jsx)(b,{})})]})]})};a.a.render(Object(j.jsx)(y,{}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.86a3f49a.chunk.js.map